<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.firzzle.llm.mapper.OxQuizMapper">
    <!-- 문제 1개 등록, PK 반환 -->
    <insert id="insertQuestion" parameterType="com.firzzle.llm.dto.OxQuizDTO"
            useGeneratedKeys="true" keyProperty="examSeq">
        INSERT INTO fb_ai_exams (
            content_seq, question_content, model_answer, start_time, reference_text
        ) VALUES (
            #{contentSeq}, #{questionContent}, #{modelAnswer}, #{startTime}, #{referenceText}
        )
    </insert>

    <!-- 보기 여러 개 등록 -->
    <insert id="insertQuestionOptions" parameterType="java.util.List">
        INSERT INTO fb_ai_question_options (
            question_seq, option_value
        )
        VALUES
        <foreach collection="options" item="opt" separator=",">
            (#{opt.questionSeq}, #{opt.optionValue})
        </foreach>
    </insert>
</mapper>